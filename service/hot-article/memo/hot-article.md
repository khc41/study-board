## 인기글 설계
### 요구사항
- 일 단위로 상위 10건 인기글 선정
  - 매일 오전 1시 업데이트
  - 좋아요 수 / 댓글 수 / 조회수 기반 점수 계산
- 최근 7일 인기글 내역 조회

### 설계
1. 배치 처리 
   - 대규모 데이터를 1시간 만에 처리하기엔 시간이 촉박함
   - 병렬 처리를 하면 설계와 구현 복잡도가 올라감
   - 인기글 선정에는 좋아요, 댓글, 조회수, 게시글 데이터가 필요하므로 무수히 많은 질의가 필요함
     - 타 서비스에 영향
2. 스트림 처리
   - 각 데이터들을 실시간 이벤트로 처리하면 필요한 점수를 미리 계산해 상위 10건을 미리 생성 가능 
     - 게시물 생성/수정/삭제 이벤트
     - 댓글 생성/삭제 이벤트
     - 좋아요 생성/삭제 이벤트
     - 조회수 집계 이벤트

구조 상 **스트림 처리**로 선택

### 데이터 저장
- 인기글은 7일 간, 상위 10건의 내역만 관리되므로 커다란 저장공간 필요하지 않음<br>
-> redis의 **Sorted Set** 자료구조를 활용하면 정렬 상태를 유지하면서 자동 삭제 및 성능에 이점
- 오늘 날짜를 key로 실시간 데이터를 처리해서 쌓고, Client는 어제 데이터를 조회

### 데이터 전달 방식
1. API
    - 간단한 구현이나 시스템 간 결합도 증가
    - 장애 전파, 유실 등의 위험 높음
2. Message Broker
    - 복잡한 구현이나 시스템 간 결합도 감소
    - 장애 전파, 유실 등의 위험 낮음